// Generated by CoffeeScript 1.4.0
(function(){var e;e=function(){function e(){this.canvas=$("canvas")[0];this.ctx=this.canvas.getContext("2d");this.keys=new Keys;this.world=new World("2d");this.camera=new Camera(this.canvas);this.debug=new Debugger(this.world);this.player=null}e.prototype.update=function(){var e=this;this.render();return window.requestAnimFrame(function(){return e.update()})};e.prototype.initialize=function(){var e=this;this.update();this.player=new Body;this.player.position={x:0,y:0};this.player.dimensions={w:30,h:20};this.player.shootLock=!1;this.player.shoot=function(){var t;if(e.player.shootLock)return;t=new Body;t.position={x:e.player.position.x,y:e.player.position.y};t.dimensions={w:5,h:5};t.angle=e.player.angle;t.forces.y=2;return e.world.createBody(t)};return this.world.createBody(this.player)};e.prototype.render=function(){var e,t,n,r,i,s,o,u;t=this.canvas;n=this.ctx;this.keys.up&&(this.player.forces.y-=.1);this.keys.down&&(this.player.forces.y+=.1);this.keys.left&&(this.player.forces.s-=.1);this.keys.right&&(this.player.forces.s+=.1);this.keys.space&&this.player.shoot();this.world.step();if(t.width!==window.innerWidth||t.height!==window.innerHeight){t.width=2*Math.round(window.innerWidth/2);t.height=2*Math.round(window.innerHeight/2)}n.save();n.clearRect(0,0,t.width,t.height);n.translate(t.width/2,t.height/2);n.fillStyle="red";n.beginPath();n.arc(0,0,2,0,Math.PI*2,!1);n.closePath();n.fill();u=this.world.bodies;for(s=0,o=u.length;s<o;s++){e=u[s];i=e.position;r=e.dimensions;n.save();n.translate(i.x,i.y);n.rotate(e.angle);n.fillStyle="rgba(0, 100, 0, 0.5)";n.strokeStyle="rgba(0, 150, 0, 1)";n.fillRect(0-r.w/2,0-r.h/2,r.w,r.h);n.strokeRect(0-r.w/2,0-r.h/2,r.w,r.h);n.restore()}return this.ctx.restore()};return e}();$(document).ready(function(){var t;t=new e;t.assets=new Assets([]);return t.assets.load(function(){return t.initialize()})})}).call(this);